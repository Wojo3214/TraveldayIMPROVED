<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Your place where you can manage and share your travels. Everything with Travelday!">

    <link href="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <title>Travelday - My dashboard</title>

    
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js"></script>
    <script src="https://kit.fontawesome.com/82ee0524bd.js" crossorigin="anonymous"></script>
    
</head>
<body>
    <div class="l-grid">
        <nav class="nav">
            <ul class="nav__list nav__list--top">
                <li class="nav__item">
                    <a href="subpages/userprofile.html" class="nav__link"><img src="img/alan.png" class="nav__img" alt="user-img"></a>
                </li>
                <li class="nav__item nav__www">
                    <a href="https://travelday.dk/" class="nav__link back__website"><img src="img/logo.png" alt="logo" class="nav__logo"><span class="go-www">Back to website</span></a>
                </li>
            </ul>
            <ul class="nav__list nav__list--bottom">
                <li class="nav__item nav__item--active">
                    <a href="index.html" class="nav__link"><i class="fas fa-home nav__icon"></i>Dashboard</a>
                </li>
                <li class="nav__item">
                    <a href="subpages/feed.html" class="nav__link"><i class="fas fa-newspaper nav__icon"></i>Feed</a>
                </li>
                <li class="nav__item">
                    <a href="subpages/myjournal.html" class="nav__link"><i class="fas fa-book nav__icon"></i>My Journal</a>
                </li>
                <li class="nav__item">
                    <a href="subpages/booking.html" class="nav__link"><i class="fas fa-plane nav__icon"></i>My Booking</a>
                </li>
                <li class="nav__item">
                    <a href="subpages/contact_support.html" class="nav__link"><i class="fas fa-question-circle nav__icon"></i>Contact & Support</a>
                </li>
                <li class="nav__item">
                    <a href="subpages/settings.html" class="nav__link"><i class="fas fa-cog nav__icon"></i>Settings</a>
                </li>
                <li class="nav__item">
                    <a href="log-in.html" class="nav__link"><i class="fas fa-sign-out-alt nav__icon"></i>Log out</a>
                </li>
                <li class="nav__item">
                    <p class="nav__rights">All rights reserved <span class="nav__rights__date"></span></p>
                </li>
            </ul>
            
        </nav>
        <main class="c-content">
            <div class="c-content__achievements-container">
                <div class="c-content__achievements-container__places">
                    <div class="c-content__achievements-container__info">
                        <div class="c-content__achievements-container__info--upper">
                        <h5 class="c-content__achievements-container__place">Achievements</h5>
                        <i class="fas fa-times close" id="close"></i>
                        <!-- <i class="fas fa-times c-content__achievements-container__info--icon"></i> --></div>
                        <p class="c-content__achievements-container__date">Here you can see overview of your collected points.</p><br>
                        <p class="c-content__achievements-container__date">Helping other travellers by reviews, photos, rating and answers, you collect 
                            points and get closer to the next level.</p>

                            <div class="c-content__item c-content__item--vertical">
                                <p class="c-content__score">100pkt/200pkt</p>
                                <span class="c-content__bar"><span class="c-content__progress"></span></span>
                            </div>

                            <div class="c-content__achievements-container__icons">
                                <div class="c-content__achievements-container__icons__container">
                                <i class="fas fa-file-signature c-content__achievements-container__icons--icon"></i>
                                <p class="c-content__achievements-container__icons--text">5</p>
                                <p class="c-content__achievements-container__icons--text">Reviews</p>
                                </div>
                                <div class="c-content__achievements-container__icons__container">
                                <i class="fas fa-photo-video c-content__achievements-container__icons--icon"></i>
                                <p class="c-content__achievements-container__icons--text">10</p>
                                <p class="c-content__achievements-container__icons--text">Photos</p>
                                </div>
                                <div class="c-content__achievements-container__icons__container">
                                <i class="fas fa-star-half-alt c-content__achievements-container__icons--icon"></i>
                                <p class="c-content__achievements-container__icons--text">25</p>
                                <p class="c-content__achievements-container__icons--text">Rating</p>
                                </div>
                                <div class="c-content__achievements-container__icons__container">
                                <i class="fas fa-comments c-content__achievements-container__icons--icon"></i>
                                <p class="c-content__achievements-container__icons--text">7</p>
                                <p class="c-content__achievements-container__icons--text">Answers</p>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
            <header class="heading heading--main">
                <h1 class="heading__text">Dashboard</h1>
            </header>
            <div class="c-content__item">
                <div id="map" class="c-content__map"></div>
                <div class="c-content__upcoming-trips">
                    <h4 class="c-content__upcoming-trips__heading">My upcoming trips</h4>
                    <div class="c-content__upcoming-trips__places">
                        
                        <img src="img/upcoming1.png" alt="Nessebar-img" class="c-content__upcoming-trips__img">
                        <div class="c-content__upcoming-trips__info">
                            <a href="subpages/booking_details.html" class="c-content__upcoming-trips__link" > 
                                <h5 class="c-content__upcoming-trips__place">Nessebar</h5>
                                <p class="c-content__upcoming-trips__date">20/06 - 27/06</p>
                            </a>
                        </div>
                    </div>
                    <div class="c-content__upcoming-trips__places">
                        <img src="img/upcoming2.png" alt="Nessebar-img" class="c-content__upcoming-trips__img">
                        <div class="c-content__upcoming-trips__info">
                            <h5 class="c-content__upcoming-trips__place">Oslo</h5>
                            <p class="c-content__upcoming-trips__date">07/08 - 14/07</p>
                        </div>
                    </div>
                    <div class="c-content__upcoming-trips__places">
                        <img src="img/upcoming3.png" alt="Nessebar-img" class="c-content__upcoming-trips__img">
                        <div class="c-content__upcoming-trips__info">
                            <h5 class="c-content__upcoming-trips__place">Malaga</h5>
                            <p class="c-content__upcoming-trips__date">10/12 - 20/12</p>
                        </div>
                    </div>
                </div>
            </div>
            <header class=" heading heading--sub">
                <h2 class="heading__text">Top Travelday Destinations</h2>
            </header>
            <div class="c-content__item">
                <div class="c-content__destination">
                    <img src="img/top1.png" class="c-content__img" alt="Saranda">
                    <div class="c-content__destination__info">
                        <a href="https://travelday.dk/travel-item/saranda/" class="c-content__destination__link" target="_blank">
                            <h4 class="c-content__destination-city">Saranda</h4>
                            <p class="c-content__destination-country">Albanien</p>
                        </a>
                    </div>
                </div>
                <div class="c-content__destination">
                    <img src="img/top2.png" class="c-content__img" alt="Saranda">
                    <div class="c-content__destination__info">
                        <a href="https://travelday.dk/travel-item/hurghada-egypten/" class="c-content__destination__link" target="_blank">
                            <h4 class="c-content__destination-city">Hurghada</h4>
                            <p class="c-content__destination-country">Egypt</p>
                        </a>
                    </div>
                </div>
                <div class="c-content__destination">
                    <img src="img/top3.png" class="c-content__img" alt="Saranda">
                    <div class="c-content__destination__info">
                        <a href="https://travelday.dk/travel-item/nessebar-bulgarien/" class="c-content__destination__link" target="_blank">
                            <h4 class="c-content__destination-city">Nessebar</h4>
                            <p class="c-content__destination-country">Bulgaria</p>
                        </a>
                    </div>
                </div>
                <div class="c-content__days-left">
                    <p class="c-content__days-left__num"></p>
                    <p class="c-content__days-left__info">days left to the next trip</p>
                </div>
            </div>
            <header class="heading heading--sub">
                <h2 class="heading__text">Achievements</h2><i class="fas fa-info-circle heading__icon" id="show"></i>
                <span class="section-info"></span>
            </header>
            <div class="c-content__item c-content__item--vertical">
                <p class="c-content__score">100pkt/200pkt</p>
                <span class="c-content__bar"><span class="c-content__progress"></span></span>
            </div>
            <div class="c-content__button-nav"><i class="fas fa-bars"></i></div>          
        </main>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script
        src="https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js"
        charset="utf-8"
    ></script>
    
    <script type="text/javascript" src="JS/main.js"></script>
    <script>

        /********* MAPBOX**********/

        mapboxgl.accessToken = 'pk.eyJ1IjoibWFkZWVsZSIsImEiOiJjazdkMWF3NjIwNTBiM2lud2k3cjY0Njl5In0.d6TBUltXIwgnMsKbwESW7g';
        var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/madeele/ckadq6xy403s61ioohg7xtk4e',
        center: [20.532, 48.929],
        zoom: 3
        });
        
        // Aarhus
        var origin = [10.231, 56.150];
        
        // Nessebar
        var destination = [27.736, 42.658];
        
        // A simple line from origin to destination.
        var route = {
            'type': 'FeatureCollection',
            'features': [
            {
            'type': 'Feature',
            'geometry': {
            'type': 'LineString',
            'coordinates': [origin, destination]
                     }
        }
        ]
        };
        

        // Coordinates are initially set to origin.
        var point = {
        'type': 'FeatureCollection',
        'features': [
        {
        'type': 'Feature',
        'properties': {},
        'geometry': {
        'type': 'Point',
        'coordinates': origin
        }
        }
        ]
        };
        
        // Calculate the distance in kilometers between route start/end point.
        var lineDistance = turf.lineDistance(route.features[0], 'kilometers');
        
        var arc = [];
        
        // Number of steps to use in the arc and animation, more steps means
        // a smoother arc and animation, but too many steps will result in a
        // low frame rate
        var steps = 500;
        
        // Draw an arc between the `origin` & `destination` of the two points
        for (var i = 0; i < lineDistance; i += lineDistance / steps) {
        var segment = turf.along(route.features[0], i, 'kilometers');
        arc.push(segment.geometry.coordinates);
        }
        
        // Update the route with calculated arc coordinates
        route.features[0].geometry.coordinates = arc;
        
        // Used to increment the value of the point measurement against the route.
        var counter = 0;
        
        map.on('load', function() {
        // Add a source and layer displaying a point which will be animated in a circle.
        map.addSource('route', {
        'type': 'geojson',
        'data': route
        });
        
        map.addSource('point', {
        'type': 'geojson',
        'data': point
        });
        
        map.addLayer({
        'id': 'route',
        'source': 'route',
        'type': 'line',
        'paint': {
        'line-width': 4,
        'line-color': '#007cbf'
        }
        });
        
        map.addLayer({
        'id': 'point',
        'source': 'point',
        'type': 'symbol',
        'layout': {
        'icon-image': 'airport-15',
        'icon-rotate': ['get', 'bearing'],
        'icon-rotation-alignment': 'map',
        'icon-allow-overlap': true,
        'icon-ignore-placement': true
        }
        });
    })          
    // Update point geometry to a new position based on counter denoting
// the index to access the arc.
point.features[0].geometry.coordinates =
route.features[0].geometry.coordinates[counter];
 
// Calculate the bearing to ensure the icon is rotated to match the route arc
// The bearing is calculate between the current point and the next point, except
// at the end of the arc use the previous point and the current point
point.features[0].properties.bearing = turf.bearing(
turf.point(
route.features[0].geometry.coordinates[
counter >= steps ? counter - 1 : counter
]
),
turf.point(
route.features[0].geometry.coordinates[
counter >= steps ? counter : counter + 1
]
)
);
    </script>
</body>
</html>