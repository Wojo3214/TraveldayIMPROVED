<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find a map with visited and places-to-be visited. Have a look on detials of fligts, accomondation and destination.">

    <link href="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <title>Travelday - My Booking</title>

    <script src="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js"></script>
    <script src="https://kit.fontawesome.com/82ee0524bd.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <div class="l-grid">
        <nav class="nav">
            <ul class="nav__list nav__list--top">
                <li class="nav__item">
                    <a href="userprofile.html" class="nav__link"><img src="../img/alan.png" class="nav__img" alt="user-img"></a>
                </li>
                <li class="nav__item nav__www">
                    <a href="https://travelday.dk/" class="nav__link back__website"><img src="../img/logo.png" alt="logo" class="nav__logo"><span class="go-www">Back to website</span></a>
                </li>
            </ul>
            <ul class="nav__list nav__list--bottom">
                <li class="nav__item ">
                    <a href="../index.html" class="nav__link"><i class="fas fa-home nav__icon"></i>Dashboard</a>
                </li>
                <li class="nav__item ">
                    <a href="feed.html" class="nav__link"><i class="fas fa-newspaper nav__icon"></i>Feed</a>
                </li>
                <li class="nav__item">
                    <a href="myjournal.html" class="nav__link"><i class="fas fa-book nav__icon"></i>My Journal</a>
                </li>
                <li class="nav__item nav__item--active">
                    <a href="booking.html" class="nav__link"><i class="fas fa-plane nav__icon"></i>My Booking</a>
                </li>
                <li class="nav__item">
                    <a href="contact_support.html" class="nav__link"><i class="fas fa-question-circle nav__icon"></i>Contact & Support</a>
                </li>
                <li class="nav__item">
                    <a href="settings.html" class="nav__link"><i class="fas fa-cog nav__icon"></i>Settings</a>
                </li>
                <li class="nav__item">
                    <a href="../log-in.html" class="nav__link"><i class="fas fa-sign-out-alt nav__icon"></i>Log out</a>
                </li>
                <li class="nav__item">
                    <p class="nav__rights">All rights reserved <span class="nav__rights__date"></span></p>
                </li>
            </ul>
        </nav>
        <main class="g-content">
            <!-- INFO ICON WITH THE INFORMATION ON CLICK -->
            <header class="heading heading--main heading_booking">
                <h1 class="heading__text">My Booking</h1><i class="fas fa-info-circle heading__icon" id="show"></i>
                <p class="heading_booking__paragraph">Here you can find a map with visited and places-to-be visited. Click on an info icon down below<br>to have a look on detials of fligts, accomondation and destination.</p>
            </header>
            <div class="g-content__item">
                <div id="map" class="g-content__map"></div>
                <!-- STATISTICS UNDER THE MAP -->
                <div class="g-content__statistics g-content__statistics__flights">
                    <div class="g-content__statistics__info">
                        <h4 class="g-content__statistics-name">Total flights</h4>
                        <p class="g-content__statistics-numbers">50</p>
                    </div>
                </div>
                <div class="g-content__statistics g-content__statistics__kilometers">
                    <div class="g-content__statistics__info">
                        <h4 class="g-content__statistics-name">Kilometers</h4>
                        <p class="g-content__statistics-numbers">10000</p>
                    </div>
                </div>
                <div class="g-content__statistics g-content__statistics__countries">
                    <div class="g-content__statistics__info">
                        <h4 class="g-content__statistics-name">Visited Countries</h4>
                        <p class="g-content__statistics-numbers">20</p>
                    </div>
                </div>
                <div class="g-content__tickets g-content__tickets--upper">
                    <button class="g-content__post__tickets__button"><span>ADD NEW BOOKING</span></button>
                    <header class="heading heading--sub">
                        <!-- UPCOMING TICKETS -->
                        <h2 class="heading__text-tickets">Upcoming</h2>
                    </header>
                    <div class="g-content__ticket">
                        <i class="fas fa-calendar-alt g-content__ticket__icon"></i>
                        <h5 class="g-content__ticket__data">12/08/2020</h5>
                        <div class="g-content__ticket__places">
                            <p class="g-content__ticket__from"><i class="fas fa-map-marker-alt g-content__ticket__location"></i>Billund</hp><br>
                            <p class="g-content__ticket__to"><i class="fas fa-map-marker-alt g-content__ticket__location"></i>Nessebar</hp><br>
                        </div>
                        <i class="fas fa-pencil-alt g-content__ticket__pen"></i> 
                        <a href="booking_details.html" alt="Ticket-icon"><i class="fas fa-info-circle g-content__ticket__info"></i></a>
                    </div>
                    <div class="g-content__ticket">
                       <i class="fas fa-calendar-alt g-content__ticket__icon"></i>
                        <h5 class="g-content__ticket__data">12/08/2020</h5>
                        <div class="g-content__ticket__places">
                            <p class="g-content__ticket__from"><i class="fas fa-map-marker-alt g-content__ticket__location"></i>Billund</hp><br>
                            <p class="g-content__ticket__to"><i class="fas fa-map-marker-alt g-content__ticket__location"></i>Saranda</hp><br>
                                 
                        </div>
                        <i class="fas fa-pencil-alt g-content__ticket__pen"></i>
                        <a href="#" alt="Ticket-icon"><i class="fas fa-info-circle g-content__ticket__info"></i></a>
                    </div>
                </div>
                <div class="g-content__tickets g-content__tickets--lower">
                    <header class=" heading heading--sub">
                         <!-- USED TICKETS -->
                        <h2 class="heading__text-tickets">Places I have been to</h2>
                    </header>
                    <div class="g-content__ticket g-content__ticket">
                        <i class="fas fa-calendar-alt g-content__ticket__icon--grey"></i>
                        <h5 class="g-content__ticket__data">12/08/2020</h5>
                        <div class="g-content__ticket__places">
                           <p class="g-content__ticket__from"><i class="fas fa-map-marker-alt g-content__ticket__location--grey"></i>Billund</hp><br>
                                <p class="g-content__ticket__to"><i class="fas fa-map-marker-alt g-content__ticket__location--grey"></i>Saranda</hp><br>    
                        </div>
                        <i class="fas fa-pencil-alt g-content__ticket__pen"></i>   
                        <i class="fas fa-info-circle g-content__ticket__info"></i>
                    </div>
                    <div class="g-content__ticket g-content__ticket">
                        <i class="fas fa-calendar-alt g-content__ticket__icon--grey"></i>
                        <h5 class="g-content__ticket__data">12/08/2020</h5>
                        <div class="g-content__ticket__places">
                            <p class="g-content__ticket__from"><i class="fas fa-map-marker-alt g-content__ticket__location--grey"></i>Billund</hp><br>
                                <p class="g-content__ticket__to"><i class="fas fa-map-marker-alt g-content__ticket__location--grey"></i>Saranda</hp><br>
                                   
                        </div>
                        <i class="fas fa-pencil-alt g-content__ticket__pen"></i>
                        <i class="fas fa-info-circle g-content__ticket__info"></i>
                    </div>
                </div>
            </div>
            <!-- POPUP WITH NEW BOOKING -->
            <div class="g-content__booking__popup__background">
                <div class="g-content__booking__popup">
                    <div class="g-content__booking__popup__element">
                        <i class="fas fa-times close" id="close"></i>
                        <h5 class="g-content__booking__popup__element__title">ADD NEW BOOKING</h5>
                    </div>
                    <div class="g-content__booking__popup__container">
                        <form action="#">
                            <label class="g-content__booking__popup__container__label">Hotel name
                            <input type="text" id="text" name="Hotel name"></label>
                            <label class="g-content__booking__popup__container__label">Hotel address
                            <input type="text" id="text" name="Hotel address"></label>
                            <label class="g-content__booking__popup__container__label">Check-in date and time
                            <input type="date" id="text" name="Check-in date">
                            <input type="time" id="text" name="Check-in time"></label>
                            <label class="g-content__booking__popup__container__label">Check-in date and time
                            <input type="date" id="text" name="Check-out date">
                            <input type="time" id="text" name="Check-out time"></label>
                            <input type="submit" id="submit" name="Submit">
                        </form>
                    </div>
                </div>
            </div>
            <div class="c-content__button-nav"><i class="fas fa-bars"></i></div>
        </main>
    </div>
    <script type="text/javascript" src="../JS/main.js"></script>
    <script
        src="https://api.tiles.mapbox.com/mapbox.js/plugins/turf/v2.0.0/turf.min.js"
        charset="utf-8"
    ></script>
    <script>
         /********* MAPBOX**********/

        mapboxgl.accessToken = 'pk.eyJ1IjoibWFkZWVsZSIsImEiOiJjazdkMWF3NjIwNTBiM2lud2k3cjY0Njl5In0.d6TBUltXIwgnMsKbwESW7g';
        var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/madeele/ckadq6xy403s61ioohg7xtk4e',
        center: [20.532, 48.929],
        zoom: 3
        });
        
        // Aarhus
        var origin = [10.231, 56.150];
        
        // Nessebar
        var destination = [27.736, 42.658];

        /*taken from https://docs.mapbox.com/mapbox-gl-js/example/animate-point-along-route/*/
        
        // A simple line from origin to destination.
        var route = {
            'type': 'FeatureCollection',
            'features': [
            {
            'type': 'Feature',
            'geometry': {
            'type': 'LineString',
            'coordinates': [origin, destination]
                     }
        }
        ]
        };
        
        // A single point that animates along the route.
        // Coordinates are initially set to origin.
        var point = {
        'type': 'FeatureCollection',
        'features': [
        {
        'type': 'Feature',
        'properties': {},
        'geometry': {
        'type': 'Point',
        'coordinates': origin
        }
        }
        ]
        };
        
        // Calculate the distance in kilometers between route start/end point.
        var lineDistance = turf.lineDistance(route.features[0], 'kilometers');
        
        var arc = [];
        
        // Number of steps to use in the arc and animation, more steps means
        // a smoother arc and animation, but too many steps will result in a
        // low frame rate
        var steps = 500;
        
        // Draw an arc between the `origin` & `destination` of the two points
        for (var i = 0; i < lineDistance; i += lineDistance / steps) {
        var segment = turf.along(route.features[0], i, 'kilometers');
        arc.push(segment.geometry.coordinates);
        }
        
        // Update the route with calculated arc coordinates
        route.features[0].geometry.coordinates = arc;
        
        // Used to increment the value of the point measurement against the route.
        var counter = 0;
        
        map.on('load', function() {
        // Add a source and layer displaying a point which will be animated in a circle.
        map.addSource('route', {
        'type': 'geojson',
        'data': route
        });
        
        map.addSource('point', {
        'type': 'geojson',
        'data': point
        });
        
        map.addLayer({
        'id': 'route',
        'source': 'route',
        'type': 'line',
        'paint': {
        'line-width': 2,
        'line-color': '#007cbf'
        }
        });
        
    })          
    // Update point geometry to a new position based on counter denoting
// the index to access the arc.
point.features[0].geometry.coordinates =
route.features[0].geometry.coordinates[counter];
 
// Calculate the bearing to ensure the icon is rotated to match the route arc
// The bearing is calculate between the current point and the next point, except
// at the end of the arc use the previous point and the current point
point.features[0].properties.bearing = turf.bearing(
turf.point(
route.features[0].geometry.coordinates[
counter >= steps ? counter - 1 : counter
]
),
turf.point(
route.features[0].geometry.coordinates[
counter >= steps ? counter : counter + 1
]
)
);
    </script>
</body>
</html>